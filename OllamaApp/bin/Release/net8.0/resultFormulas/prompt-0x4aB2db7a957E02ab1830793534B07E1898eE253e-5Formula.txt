//Assembly info for PNL calculation formula
[assembly: FormulaAssembly("SetAdmin")]

namespace Sauron.Formula.SetAdmin
{
    public class SetAdminFormula : IFormulaPlugin
    {
        public CalculationResult<IEnumerable<KeyValuePair<string, BigDecimal>>?> Formula(TransactionInfo info,
            IEnumerable<KeyValuePair<string, decimal>>? tokenPrices = null)
        {
            //As the method doesn't involve any transaction of tokens, PNL is always 0 for all addresses.
            var result = new List<KeyValuePair<string, BigDecimal>>();

            foreach (var address in info.FromAddresses)
            {
                if (!result.Any(r => r.Key == address))
                    result.Add(new KeyValuePair<string, BigDecimal>(address, new BigDecimal(0)));
            }

            //The method may involve changing the admin status of another address, but it doesn't affect PNL for that address.
            //Hence, we don't add any checks or calculations for those addresses.

            return new CalculationResult<IEnumerable<KeyValuePair<string, BigDecimal>>?>(result);
        }
    }
}